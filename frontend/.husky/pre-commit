#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for staged ts/tsx files
if git diff --cached --name-only | grep -E '\.tsx?$'; then
  echo "🔍 Running TypeScript checks on staged files..."
  
  # Run type checking on staged TypeScript files
  npx tsc --noEmit
  
  # Check exit code
  if [ $? -ne 0 ]; then
    echo "❌ TypeScript check failed. Please fix the errors before committing."
    exit 1
  fi
  
  echo "✅ TypeScript check passed!"
fi

# Run ESLint on staged files
npx lint-staged